<html>
<head>
    <script type="text/javascript">
        async function start() {
          const el = document.getElementById('message-size');
          const length = parseInt(el.value);
          let msg = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklnopqrstuvwxyz0123456789';
          while (msg.length < length) {
            msg = msg + msg;
          }
          msg = msg.substring(0, length);
          let numAttempts = 1;
          while (true) {
             console.log('Attempt ' + numAttempts + ' starting');
             wait window.chrome.webview.postMessage(msg);
             console.log('Attempt ' + numAttempts + ' completed');
             numAttempts++;
          }
        }
    </script>
</head>
<body>
    <h1>This is the page</h1>
    Message size: <input type="text" id="message-size"></input><br>
    <button onClick="start()">Start</button>
</body>
</html>
